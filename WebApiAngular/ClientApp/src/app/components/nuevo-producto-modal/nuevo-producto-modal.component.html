<div class="container-fluid">
  <h2 mat-dialog-title>Agregar producto</h2>
  <form [formGroup]="nuevoProductoForm" (ngSubmit)="guardar()">
    <mat-dialog-content>
      <div class="row">
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Nombre</mat-label>
            <input
              matInput
              placeholder="Dulce de papaya"
              formControlName="nombreProducto"
            />
            <mat-error
              *ngIf="
                nuevoProductoForm.get('nombreProducto').hasError('required')
              "
            >
              Por favor ingrese un nombre
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Tipo de producto</mat-label>
            <mat-select formControlName="tipo">
              <mat-option *ngFor="let tipo of tiposDeProducto" [value]="tipo">
                {{ tipoDeProducto[tipo] }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="nuevoProductoForm.get('tipo').hasError('required')"
              >Por favor escoja un tipo</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Especificación</mat-label>
            <mat-select formControlName="especificacionProducto">
              <mat-option
                #especificaciones
                *ngFor="let especificacion of tiposDeEspecificacion"
                [value]="especificacion"
              >
                {{ tipoDeEspecificacion[especificacion] }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="
                nuevoProductoForm
                  .get('especificacionProducto')
                  .hasError('required')
              "
              >Por favor escoja una Especificación</mat-error
            >
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Unidad de Medida</mat-label>
            <mat-select formControlName="unidadDeMedidaProducto">
              <mat-option
                *ngFor="let unidad of tiposDeUnidadDeMedida"
                [value]="unidad"
              >
                {{ tipoDeUnidadDeMedida[unidad] }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="
                nuevoProductoForm
                  .get('unidadDeMedidaProducto')
                  .hasError('required')
              "
              >Por favor escoja una unidad de medida</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Sub categoría</mat-label>
            <mat-select formControlName="subCategoria">
              <mat-option *ngFor="let sub of subCategorias" [value]="sub.id">
                {{ sub.nombreSubCategoria }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="nuevoProductoForm.get('subCategoria').hasError('required')"
              >Por favor escoja una sub categoría</mat-error
            >
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field>
            <mat-label>Emboltorio</mat-label>
            <mat-select formControlName="emboltorio">
              <mat-option
                *ngFor="let emboltorio of emboltorios"
                [value]="emboltorio.id"
              >
                {{ emboltorio.nombreProducto }}
              </mat-option>
            </mat-select>
            <mat-error
              *ngIf="nuevoProductoForm.get('emboltorio').hasError('required')"
              >Por favor escoja una sub categoría</mat-error
            >
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <mat-form-field>
            <mat-label>Cantidad</mat-label>
            <input matInput type="number" formControlName="cantidadProducto" />
            <mat-error
              *ngIf="
                nuevoProductoForm.get('cantidadProducto').hasError('required')
              "
            >
              Por favor ingrese una cantidad
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field>
            <mat-label>Costo unitario</mat-label>
            <input
              matInput
              type="number"
              formControlName="costoUnitarioProducto"
            />
            <mat-error
              *ngIf="
                nuevoProductoForm
                  .get('costoUnitarioProducto')
                  .hasError('required')
              "
            >
              Por favor ingrese un costo unitario
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field>
            <mat-label>Porcentaje de utilidad</mat-label>
            <input
              matInput
              type="number"
              formControlName="porcentajeDeUtilidadProducto"
            />
            <mat-error
              *ngIf="
                nuevoProductoForm
                  .get('porcentajeDeUtilidadProducto')
                  .hasError('required')
              "
            >
              Por favor ingrese un porcentaje de utilidad
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </mat-dialog-content>

    <div
      *ngIf="success"
      style="display: flex; justify-content: center;"
      class="alert alert-success"
      role="alert"
    >
      {{ mensaje }}
    </div>
    <div
      *ngIf="error"
      style="display: flex; justify-content: center;"
      class="alert alert-danger"
      role="alert"
    >
      {{ mensaje }}
    </div>
    <mat-dialog-actions>
      <button mat-button [mat-dialog-close]="true">Cerrar</button>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="nuevoProductoForm.invalid"
      >
        Guardar
      </button>
    </mat-dialog-actions>
  </form>
</div>
