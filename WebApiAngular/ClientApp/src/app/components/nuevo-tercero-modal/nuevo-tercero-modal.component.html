<div class="container-fluid">
  <h2 mat-dialog-title>Agregar {{ selectedValue }}</h2>
  <form [formGroup]="nuevoTerceroForm" (ngSubmit)="guardar()">
    <mat-dialog-content>
      <div class="row">
        <div class="col-md-7">
          <mat-form-field class="full-width">
            <mat-label>Razón Social</mat-label>
            <input
              matInput
              placeholder="Empresa con nombre"
              formControlName="razonSocialTercero"
            />
            <mat-error
              *ngIf="
                controls['razonSocialTercero'].errors &&
                controls['razonSocialTercero'].errors.required
              "
            >
              Por favor ingrese un nombre
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-5">
          <mat-form-field class="full-width">
            <mat-label>Nit</mat-label>
            <input
              matInput
              placeholder="10101010"
              formControlName="nitTercero"
            />
            <mat-error
              *ngIf="
                controls['nitTercero'].errors &&
                controls['nitTercero'].errors.required
              "
            >
              Por favor ingrese un nit
            </mat-error>
            <mat-error
              *ngIf="
                controls['nitTercero'].errors &&
                controls['nitTercero'].errors.canNotContainSpace
              "
            >
              El nit no puede contener espacios
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <mat-form-field class="full-width">
            <mat-label>Dirección</mat-label>
            <input
              matInput
              placeholder="calle 123 # 123 - 321"
              formControlName="terceroDireccion"
            />
            <mat-error
              *ngIf="
                controls['terceroDireccion'].errors &&
                controls['terceroDireccion'].errors.maxlength
              "
            >
              Se excedió el limite de caracteres
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width">
            <mat-label>Celular</mat-label>
            <input
              type="number"
              matInput
              placeholder="3213216541"
              formControlName="terceroNumeroCelular"
            />
            <mat-error
              *ngIf="
                controls['terceroNumeroCelular'].errors &&
                controls['terceroNumeroCelular'].errors.max
              "
            >
              Se excedió el limite de caracteres
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width">
            <mat-label>Email</mat-label>
            <input
              type="email"
              matInput
              placeholder="correo@dominio.com"
              formControlName="terceroEmail"
            />

            <mat-error
              *ngIf="
                controls.terceroEmail.errors &&
                controls.terceroEmail.errors.maxlength
              "
            >
              Se excedió el limite de caracteres
            </mat-error>
            <mat-error
              *ngIf="
                controls.terceroEmail.errors &&
                controls.terceroEmail.errors.email
              "
            >
              El email es invalido
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <form
        [formGroup]="nuevoPrecioForm"
        (ngSubmit)="agregarPrecio()"
        *ngIf="selectedValue === 'Clientes'"
      >
        <div class="row">
          <div class="col-md-6">
            <mat-form-field class="full-width">
              <mat-label>Producto</mat-label>
              <mat-select formControlName="producto">
                <mat-option
                  *ngFor="let producto of productos"
                  [value]="producto.id"
                >
                  {{ producto.nombreProducto }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-5">
            <mat-form-field class="full-width">
              <mat-label>Valor</mat-label>
              <input
                type="number"
                matInput
                placeholder="1500"
                formControlName="valor"
              />
            </mat-form-field>
          </div>
          <div class="col-md-1">
            <button
              [disabled]="nuevoPrecioForm.invalid"
              mat-raised-button
              mat-icon-button
              matTooltip="Agregar"
              matTooltipPosition="below"
            >
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </form>
    </mat-dialog-content>

    <div
      *ngIf="success"
      style="display: flex; justify-content: center;"
      class="alert alert-success"
      role="alert"
    >
      {{ mensaje }}
    </div>
    <div
      *ngIf="error"
      style="display: flex; justify-content: center;"
      class="alert alert-danger"
      role="alert"
    >
      {{ mensaje }}
    </div>
    <mat-dialog-actions>
      <button mat-button [mat-dialog-close]="true">Cerrar</button>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="nuevoTerceroForm.invalid"
      >
        Guardar
      </button>
    </mat-dialog-actions>
  </form>
</div>
